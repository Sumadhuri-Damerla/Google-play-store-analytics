---
title: "Google Play Store Analytics"
subtitle: "ACS -Data analytics course project work"
author: "Group-3 : Sumadhuri Damerla, Shaoor Jan, Ashjan Khan"
output: 
  html_document:
    theme: cosmo
    highlight: monochrome
    toc: true
    toc_float: false
    toc_depth: 4
    code_folding: hide
    css: styles.css
---

## Summary
The **google play store analytics** [dataset](https://www.kaggle.com/lava18/google-play-store-apps) offers insights into different apps, their ratings, user-reviews, installs and many other. In this report,we explore the dataset to find relations between columns...


## Preparations
Loading necessary packages
```{r message=FALSE, warning=FALSE}
library(VIM)
library(mice)
library(tidyverse)
library(magrittr)
library(dplyr)
library(stringr)
library(xlsx)
```

## Analysis

### Data
```{r loading_data}

play_store <- read_csv("data/googleplaystore.csv")

user_review <- read_csv("data/googleplaystore_user_reviews.csv")

```
The loaded play store data contains `r play_store %>% count()` rows and the user review data contains `r user_review %>% count()` rows

### Preprocessing data
```{r Tidy Data}

# changing column names to remove spaces and other special characters and to maintain consistency
colnames(play_store) <- c("app", "category", "ratting", "reviews", "size_mb", "installs", "types", "price", "content_ratting", "genres", "last_update", "current_ver", "android_ver")

#viewing data
summary(play_store)
str(play_store)
dim(play_store)

```
As can be seen from the table, the data contains missing values, duplicates and many inconsistencies. --Add related text here

### Tidying Data
#### No. of apps in the dataset
```{r Visualization:  Number of apps in the dataset }

 length(unique(play_store$app))

```

#### Removing the duplicate values
```{r Removing duplicate values}


# number of unique apps
# functions used: unique(), duplicated(), distinct()


# unq_apps <- unique(play_store$App)
#  length(unq_apps)

# number of unique rows
# unq_play_store <- distinct(play_store)
# unq_play_store


#  Observations: Dataset include two different observations for the same app, with different reviews (number of reviews), we kept the lesser number, so not to create overly optimistic results
# another option is to take mean of the duplicate values and use it instead  

arranged_data_set <- play_store %>% 
                      arrange(app, desc(reviews))

dpl_value <- which(!duplicated(arranged_data_set$app))  

new_play_store <- arranged_data_set[dpl_value,]



```



#### Missing data
```{r}

colSums(is.na(new_play_store))

# no_NA <- which(is.na(new_play_store$rating))

# pattern graph
# md.pattern(new_play_store, rotate.names = 90)

# graph
mis_data_pattern <- aggr(new_play_store, col=c('navyblue','yellow'),
 numbers=TRUE, sortVars=TRUE,
 labels=names(new_play_store), cex.axis=.7,
 gap=3, ylab=c("Missing data","Pattern"))

# Data for app "Life Made WI-Fi Touchscreen Photo Frame" removed (wrong ratting, reviews, size e.t.c)
new_play_store <- new_play_store[new_play_store$app != "Life Made WI-Fi Touchscreen Photo Frame", ]


# removing observations with reviews but NaN rating
new_play_store <- subset(new_play_store, !(is.na(new_play_store$ratting) & !new_play_store$reviews == "0" ))

# converting reviews to numeric
new_play_store$reviews <- as.numeric(new_play_store$reviews)



```



#### Convert all app sizes to MB
```{r Convert all app sizes to MB}

# changing all app sizes to MB
selectedRows <- grep("k", new_play_store$size_mb)
new_play_store$size_mb <- gsub('k', '', new_play_store$size_mb)
new_play_store$size_mb <- gsub('M', '', new_play_store$size_mb)
new_play_store$size_mb[selectedRows] <- as.numeric(new_play_store$size_mb[selectedRows])  / 1024

```


#### install column: remove "+", "," and convert into numeric 
```{r}

# removing "+", ","
new_play_store$installs <- gsub('[[:punct:]]', '', new_play_store$installs)

# convert into numeric 
new_play_store$installs <- as.numeric(new_play_store$installs)


```


####  price column: rmove '$' and convert into numeric
```{r}
# removing "$"
new_play_store$price <- gsub( "\\$", '', new_play_store$price)

# convert into numeric 
new_play_store$price <- as.numeric(new_play_store$price)

```


#### seperate content ratting column 
```{r}


new_play_store$content_ratting <- gsub( '\\+', '', new_play_store$content_ratting )

new_play_store <-  new_play_store %>% 
  separate(content_ratting, c("content_ratting", "min_age"), convert = TRUE, sep = "\\s+(?=\\S*$)")

```


#### Convert last_update column into date
```{r}

 new_play_store$last_update <- as.Date(new_play_store$last_update, format = "%d-%b-%y")


```


#### android version column 
```{r}

ver_dev_rows <- grep("Varies with device", new_play_store$android_ver)

new_play_store_temp <- new_play_store$android_ver[ver_dev_rows]


# Fill with "Varies with device"
new_play_store[ver_dev_rows, "min_android_ver"] <- new_play_store_temp




new_play_store <-  new_play_store %>% 
  separate(android_ver, c("min_android_ver", "max_android_ver"), sep = "\\s", )




```




#### Exporting data to excel
```{r}

# write.xlsx(new_play_store, "mydata.xlsx")

```

### Results
## EDA
Now, we use the tidy data and explore different aspects of the dataset
```{r}

str(new_play_store)

```




